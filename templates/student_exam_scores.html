{% extends "admin_dashboard.html" %}
{% block content %}
<link rel="stylesheet" href="../static/assets/css/styles.min.css" />
<link rel="stylesheet" href="../static/assets/css/n.css" />
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<style>
.score-header{background:#667eea;color:#fff;padding:15px;border-radius:5px;margin-bottom:15px}.score-header h2{margin:0;font-size:18px}.info-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:10px;padding:15px;background:#f5f5f5;border-radius:5px;margin-bottom:15px}.info-box{padding:10px;background:#fff;border-left:3px solid #667eea;border-radius:3px;font-size:12px}.info-box label{color:#667eea;font-weight:600;margin:0;display:block;text-transform:uppercase}.info-box input{border:none;background:transparent;font-weight:600;color:#333;width:100%}.scores-table{width:100%;border-collapse:collapse;background:#fff;border-radius:5px;overflow:hidden;margin-top:15px}.scores-table thead{background:#667eea;color:#fff}.scores-table th{padding:12px;text-align:left;font-weight:600}.scores-table td{padding:12px;border-bottom:1px solid #e0e0e0;text-align:center}.scores-table tbody tr:hover{background:#f5f5f5}.scores-table .average{font-weight:600;color:#667eea;font-size:14px}.no-scores{text-align:center;padding:40px;color:#666;font-size:14px}.back-btn{padding:8px 16px;background:#667eea;color:#fff;text-decoration:none;border-radius:3px;display:inline-block;margin-top:20px}
</style>

<div style="max-width:900px;margin:0 auto;padding:10px">
<div class="score-header"><h2><i class="fas fa-chart-bar"></i> Student Exam Scores</h2></div>
<div class="info-row">
<div class="info-box"><label>Admission:</label><input value="{{ admission_no }}" readonly></div>
<div class="info-box"><label>Name:</label><input value="{{ student_name }}" readonly></div>
<div class="info-box"><label>Year:</label><input value="{{ year }}" readonly></div>
<div class="info-box"><label>Term:</label><input value="{{ term }}" readonly></div>
<div class="info-box"><label>Exam Type:</label><input value="{{ exam_type }}" readonly></div>
</div>

{% if marks %}
<table class="scores-table">
  <thead>
    <tr>
      <th>Subject</th>
      <th>Score</th>
    </tr>
  </thead>
  <tbody>
    {% set total = 0 %}
    {% set count = 0 %}
    {% for subject, score in marks.items() %}
      <tr>
        <td style="text-align:left">{{ subject }}</td>
        <td>{{ score }}</td>
      </tr>
      {% set total = total + score %}
      {% set count = count + 1 %}
    {% endfor %}
    {% if count > 0 %}
    <tr style="background:#e8eef7;font-weight:600">
      <td style="text-align:left">Average</td>
      <td class="average">{{ (total / count)|round(2) }}</td>
    </tr>
    {% endif %}
  </tbody>
</table>
{% else %}
<div class="no-scores">
  <i class="fas fa-inbox" style="font-size:40px;margin-bottom:10px;display:block;color:#ccc"></i>
  <p>No exam scores recorded for this student</p>
</div>
{% endif %}

<a href="javascript:history.back()" class="back-btn">
  <i class="fas fa-arrow-left"></i> Back
</a>
</div>

<script src="../static/assets/libs/jquery/jquery.min.js"></script>
<script src="../static/assets/libs/bootstrap.bundle.min.js"></script>
<script src="../static/assets/js/sidebarmenu.js"></script>
<script src="../static/assets/js/app.min.js"></script>
<script src="../static/assets/libs/apexcharts/apexcharts.min.js"></script>
<script src="../static/assets/libs/simplebar/simplebar.js"></script>
<script src="../static/assets/js/dashboard.js"></script>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

{% endblock %}
